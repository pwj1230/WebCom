<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Widget Sortable æ‹–æ‹½æ’åº â€” WebCom Samples</title>
<script src="_base.js"></script>
<style>
.sort-item {
  padding: 0.6em 1em;
  margin-bottom: 0.4em;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  cursor: grab;
  display: flex;
  align-items: center;
  gap: 0.6em;
  user-select: none;
}
.sort-item:active { cursor: grabbing; }
.sort-item .handle { cursor: grab; color: #94a3b8; font-size: 1.2em; }
.sort-item.dragging { opacity: 0.4; background: #dbeafe; }
</style>
</head>
<body>
<div class="page-wrap">
<h1>Sortable â€” æ‹–æ‹½æ’åº</h1>
<p class="subtitle">ä¸ºåˆ—è¡¨å®¹å™¨å¯ç”¨æ‹–æ‹½æ’åºåŠŸèƒ½ï¼Œæ”¯æŒæ‹–æ‹½æ‰‹æŸ„ã€æ’åºå›è°ƒç­‰é…ç½®ã€‚</p>

<h2>1. åŸºç¡€æ‹–æ‹½æ’åºï¼ˆæ•´ä¸ªå…ƒç´ å¯æ‹–ï¼‰</h2>
<div class="demo-block">
  <ul id="sort-basic" style="list-style:none;padding:0">
    <li class="sort-item">ğŸ è‹¹æœ</li>
    <li class="sort-item">ğŸŠ æ©™å­</li>
    <li class="sort-item">ğŸ‹ æŸ æª¬</li>
    <li class="sort-item">ğŸ‡ è‘¡è„</li>
    <li class="sort-item">ğŸ“ è‰è“</li>
  </ul>
  <div id="sort-basic-result" class="result-box" style="margin-top:0.8em">ï¼ˆæ‹–æ‹½åæ˜¾ç¤ºæ–°é¡ºåºï¼‰</div>
</div>
<pre class="code-block">import { sortable } from '../src/Widget/Sortable.js';

sortable(container, {
  onChange: (newOrder) => {
    console.log('æ–°é¡ºåºï¼š', newOrder);
  }
});</pre>

<h2>2. ä½¿ç”¨æ‹–æ‹½æ‰‹æŸ„ï¼ˆä»…æ‰‹æŸ„å¯æ‹–ï¼‰</h2>
<div class="demo-block">
  <div id="sort-handle">
    <div class="sort-item"><span class="handle">â ¿</span>è®¾è®¡æ–‡æ¡£</div>
    <div class="sort-item"><span class="handle">â ¿</span>æŠ€æœ¯æ–¹æ¡ˆ</div>
    <div class="sort-item"><span class="handle">â ¿</span>å¼€å‘é˜¶æ®µ</div>
    <div class="sort-item"><span class="handle">â ¿</span>æµ‹è¯•éªŒæ”¶</div>
    <div class="sort-item"><span class="handle">â ¿</span>ä¸Šçº¿éƒ¨ç½²</div>
  </div>
  <div id="sort-handle-result" class="result-box" style="margin-top:0.8em">ï¼ˆæ‹–æ‹½å·¦ä¾§ â ¿ æ‰‹æŸ„è¿›è¡Œæ’åºï¼‰</div>
</div>
<pre class="code-block">import { sortable } from '../src/Widget/Sortable.js';

sortable(container, {
  triggerSelector: '.handle', // åªæœ‰ .handle å…ƒç´ å¯è§¦å‘æ‹–æ‹½
  onChange: (items) => {
    const names = items.map(el => el.textContent.trim());
    console.log('æ–°é¡ºåºï¼š', names);
  }
});</pre>

<h2>3. ç¦ç”¨æ‹–æ‹½ / é‡æ–°å¯ç”¨</h2>
<div class="demo-block">
  <div style="display:flex;gap:0.5em;margin-bottom:0.8em">
    <button id="btn-disable">ç¦ç”¨æ’åº</button>
    <button id="btn-enable">å¯ç”¨æ’åº</button>
  </div>
  <div id="sort-toggle">
    <div class="sort-item">ä»»åŠ¡ A</div>
    <div class="sort-item">ä»»åŠ¡ B</div>
    <div class="sort-item">ä»»åŠ¡ C</div>
  </div>
</div>
<pre class="code-block">const inst = sortable(container);

inst.disable();  // ç¦ç”¨æ’åº
inst.enable();   // é‡æ–°å¯ç”¨</pre>

<h2>å‚æ•°è¯´æ˜</h2>
<table class="param-table">
  <tr><th>å‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr>
  <tr><td>container</td><td>HTMLElement</td><td>åˆ—è¡¨å®¹å™¨å…ƒç´ </td></tr>
  <tr><td>option.triggerSelector</td><td>string</td><td>æŒ‡å®šå¯è§¦å‘æ‹–æ‹½çš„å­å…ƒç´ é€‰æ‹©å™¨ï¼Œç•™ç©ºåˆ™æ•´ä¸ª item å¯æ‹–</td></tr>
  <tr><td>option.onChange</td><td>Function</td><td>æ’åºç»“æŸå›è°ƒï¼Œå‚æ•°ä¸ºæ–°é¡ºåºçš„ DOM èŠ‚ç‚¹æ•°ç»„</td></tr>
  <tr><td>option.itemSelector</td><td>string</td><td>æŒ‡å®šå­é¡¹é€‰æ‹©å™¨ï¼Œé»˜è®¤ä¸ºå®¹å™¨çš„ç›´æ¥å­å…ƒç´ </td></tr>
</table>
</div>

<script type="module">
import { sortable } from '../src/Widget/Sortable.js';

// 1. åŸºç¡€æ’åº
sortable(document.getElementById('sort-basic'), {
  onChange: (items) => {
    const names = Array.from(items).map(el => el.textContent.trim());
    document.getElementById('sort-basic-result').textContent = 'æ–°é¡ºåºï¼š' + names.join(' â†’ ');
  }
});

// 2. æ‰‹æŸ„æ’åº
sortable(document.getElementById('sort-handle'), {
  triggerSelector: '.handle',
  onChange: (items) => {
    const names = Array.from(items).map(el => el.textContent.replace('â ¿','').trim());
    document.getElementById('sort-handle-result').textContent = 'æ–°é¡ºåºï¼š' + names.join(' â†’ ');
  }
});

// 3. ç¦ç”¨/å¯ç”¨
const inst = sortable(document.getElementById('sort-toggle'));
document.getElementById('btn-disable').onclick = () => { inst && inst.disable && inst.disable(); };
document.getElementById('btn-enable').onclick = () => { inst && inst.enable && inst.enable(); };
</script>
</body>
</html>
