<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lang Time æ—¶é—´å·¥å…· â€” WebCom Samples</title>
<script src="_base.js"></script>
</head>
<body>
<div class="page-wrap">
<h1>Time â€” æ—¶é—´/æ—¥æœŸå·¥å…·</h1>
<p class="subtitle">æä¾›æ—¥æœŸæ ¼å¼åŒ–ã€å€’è®¡æ—¶ã€æ—¶é—´å¸¸é‡ã€æœˆä»½è®¡ç®—ç­‰å·¥å…·å‡½æ•°ã€‚</p>

<h2>1. formatDate â€” æ—¥æœŸæ ¼å¼åŒ–</h2>
<div class="demo-block">
  <table class="param-table" id="format-table">
    <tr><th>æ ¼å¼ä¸²</th><th>è¾“å‡º</th></tr>
  </table>
</div>
<pre class="code-block">import { formatDate } from '../src/Lang/Time.js';

formatDate('Y-m-d H:i:s');           // å½“å‰æ—¶é—´ '2026-02-27 10:30:00'
formatDate('Y/m/d');                  // '2026/02/27'
formatDate('Yå¹´mæœˆdæ—¥');             // '2026å¹´02æœˆ27æ—¥'
formatDate('H:i:s', new Date('2025-06-15 14:30:00'));  // '14:30:00'</pre>

<h2>2. prettyTime â€” æ—¶é—´ç¾åŒ–</h2>
<div class="demo-block" id="pretty-block"></div>
<pre class="code-block">import { prettyTime } from '../src/Lang/Time.js';

prettyTime(30000);   // '30ç§’'
prettyTime(90000);   // '1åˆ†30ç§’'
prettyTime(3661000); // '1å°æ—¶1åˆ†1ç§’'</pre>

<h2>3. countDown â€” å€’è®¡æ—¶</h2>
<div class="demo-block">
  <div id="countdown-display" style="font-size:2em;font-weight:bold;color:#2563eb">--</div>
  <div class="gap" style="margin-top:0.8em">
    <button id="btn-start-cd">å¼€å§‹ 10 ç§’å€’è®¡æ—¶</button>
    <button id="btn-stop-cd" class="secondary">åœæ­¢</button>
  </div>
</div>
<pre class="code-block">import { countDown } from '../src/Lang/Time.js';

const stop = countDown(10000, (remaining) =&gt; {
  console.log('å‰©ä½™ï¼š', remaining, 'ms');
}, () =&gt; {
  console.log('å€’è®¡æ—¶ç»“æŸï¼');
});</pre>

<h2>4. æ—¶é—´å¸¸é‡</h2>
<pre class="code-block">import { ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_WEEK } from '../src/Lang/Time.js';

ONE_MINUTE  // 60000
ONE_HOUR    // 3600000
ONE_DAY     // 86400000
ONE_WEEK    // 604800000

// è®¡ç®— 3 å¤©åçš„æ—¶é—´æˆ³
const threeDaysLater = Date.now() + ONE_DAY * 3;</pre>

<h2>5. æœˆä»½è®¡ç®—</h2>
<div class="demo-block" id="month-block"></div>
<pre class="code-block">import { getLastMonth, getNextMonth, monthsOffsetCalc } from '../src/Lang/Time.js';

// ä¸Šä¸ªæœˆ
getLastMonth(2026, 1);   // { year: 2025, month: 12 }
// ä¸‹ä¸ªæœˆ
getNextMonth(2026, 12);  // { year: 2027, month: 1 }
// 3 ä¸ªæœˆåçš„å¹´æœˆ
monthsOffsetCalc(3);     // { year, month }</pre>
</div>

<script type="module">
import { formatDate, prettyTime, countDown, getLastMonth, getNextMonth, monthsOffsetCalc } from '../src/Lang/Time.js';

// æ ¼å¼åŒ–è¡¨æ ¼
const table = document.getElementById('format-table');
const formats = [
  ['Y-m-d H:i:s', 'å¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’'],
  ['Y/m/d', 'å¹´/æœˆ/æ—¥'],
  ['Yå¹´mæœˆdæ—¥', 'ä¸­æ–‡æ ¼å¼'],
  ['H:i:s', 'æ—¶:åˆ†:ç§’'],
  ['m/d/Y', 'ç¾å¼æ ¼å¼'],
];
formats.forEach(([fmt, desc]) => {
  const tr = document.createElement('tr');
  tr.innerHTML = `<td><code>${fmt}</code>ï¼ˆ${desc}ï¼‰</td><td><b>${formatDate(fmt)}</b></td>`;
  table.appendChild(tr);
});

// prettyTime
const block = document.getElementById('pretty-block');
[500, 30000, 90000, 3661000, 86400000 * 2].forEach(ms => {
  const p = document.createElement('div');
  p.innerHTML = `<code>${ms.toLocaleString()} ms</code> â†’ <b>${prettyTime(ms)}</b>`;
  p.style.marginBottom = '0.3em';
  block.appendChild(p);
});

// å€’è®¡æ—¶
let stopFn = null;
const display = document.getElementById('countdown-display');

document.getElementById('btn-start-cd').onclick = () => {
  if (stopFn) stopFn();
  stopFn = countDown(10000, (remaining) => {
    display.textContent = (remaining / 1000).toFixed(1) + ' ç§’';
    display.style.color = remaining < 3000 ? '#dc2626' : '#2563eb';
  }, () => {
    display.textContent = 'ğŸ‰ æ—¶é—´åˆ°ï¼';
    stopFn = null;
  });
};

document.getElementById('btn-stop-cd').onclick = () => {
  if (stopFn) { stopFn(); stopFn = null; display.textContent = 'å·²åœæ­¢'; }
};

// æœˆä»½
const monthBlock = document.getElementById('month-block');
const now = new Date();
const y = now.getFullYear(), m = now.getMonth() + 1;
const last = getLastMonth(y, m);
const next = getNextMonth(y, m);
const offset3 = monthsOffsetCalc(3);
monthBlock.innerHTML = `
  <div>å½“å‰æœˆï¼š<b>${y}-${m}</b></div>
  <div>ä¸Šä¸ªæœˆï¼š<b>${last.year}-${last.month}</b></div>
  <div>ä¸‹ä¸ªæœˆï¼š<b>${next.year}-${next.month}</b></div>
  <div>3ä¸ªæœˆåï¼š<b>${offset3.year}-${offset3.month}</b></div>
`;
</script>
</body>
</html>
