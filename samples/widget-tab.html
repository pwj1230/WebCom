<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Widget Tab æ ‡ç­¾é¡µ â€” WebCom Samples</title>
<script src="_base.js"></script>
<style>
.tab-nav { display:flex; gap:0; border-bottom:2px solid #e2e8f0; margin-bottom:0; }
.tab-nav button { padding:0.5em 1.2em; border:none; background:transparent; cursor:pointer; border-bottom:2px solid transparent; margin-bottom:-2px; font-size:0.95em; color:#64748b; }
.tab-nav button.active { color:#0284c7; border-bottom-color:#0284c7; font-weight:600; }
.tab-pane { display:none; padding:1.2em; background:#f8fafc; border:1px solid #e2e8f0; border-top:none; border-radius:0 0 6px 6px; }
.tab-pane.active { display:block; }
</style>
</head>
<body>
<div class="page-wrap">
<h1>Tab â€” æ ‡ç­¾é¡µåˆ‡æ¢</h1>
<p class="subtitle">é€šè¿‡ tabConnect å°† Tab æŒ‰é’®ç»„ä¸å†…å®¹é¢æ¿å…³è”ï¼Œå®ç°æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½ã€‚</p>

<h2>1. åŸºç¡€ Tab åˆ‡æ¢</h2>
<div class="demo-block">
  <div class="tab-nav" id="tabs-basic">
    <button class="active" data-target="pane-1">æ¦‚è¿°</button>
    <button data-target="pane-2">å‚æ•°</button>
    <button data-target="pane-3">ç¤ºä¾‹</button>
  </div>
  <div id="pane-1" class="tab-pane active">ğŸ“‹ è¿™æ˜¯ã€Œæ¦‚è¿°ã€æ ‡ç­¾çš„å†…å®¹ã€‚tabConnect é€šè¿‡äº‹ä»¶å§”æ‰˜ç®¡ç†æ ‡ç­¾åˆ‡æ¢ï¼Œæ— éœ€æ‰‹å†™åˆ‡æ¢é€»è¾‘ã€‚</div>
  <div id="pane-2" class="tab-pane">âš™ï¸ è¿™æ˜¯ã€Œå‚æ•°ã€æ ‡ç­¾çš„å†…å®¹ã€‚æ”¯æŒè‡ªå®šä¹‰æ¿€æ´» class åï¼Œé€‚é…å„ç§ UI æ¡†æ¶çš„æ ·å¼ã€‚</div>
  <div id="pane-3" class="tab-pane">ğŸ’¡ è¿™æ˜¯ã€Œç¤ºä¾‹ã€æ ‡ç­¾çš„å†…å®¹ã€‚å¯é…åˆ hover è§¦å‘ï¼ˆä¸éœ€è¦ç‚¹å‡»å³å¯åˆ‡æ¢ï¼‰ã€‚</div>
</div>
<pre class="code-block">import { tabConnect } from '../src/Widget/Tab.js';

// å‚æ•°ï¼š(tabæŒ‰é’®å®¹å™¨, å†…å®¹å®¹å™¨, æ¿€æ´»classå, data-* å±æ€§å)
tabConnect(tabNav, contentContainer, 'active', 'target');</pre>

<h2>2. Hover è§¦å‘åˆ‡æ¢</h2>
<div class="demo-block">
  <div class="tab-nav" id="tabs-hover">
    <button class="active" data-tab="h-1">å‰ç«¯</button>
    <button data-tab="h-2">åç«¯</button>
    <button data-tab="h-3">æ•°æ®åº“</button>
  </div>
  <div id="h-1" class="tab-pane active">ğŸ¨ å‰ç«¯æŠ€æœ¯ï¼šHTML / CSS / JavaScript / Vue / React</div>
  <div id="h-2" class="tab-pane">âš™ï¸ åç«¯æŠ€æœ¯ï¼šNode.js / PHP / Python / Go / Java</div>
  <div id="h-3" class="tab-pane">ğŸ—„ï¸ æ•°æ®åº“ï¼šMySQL / PostgreSQL / MongoDB / Redis</div>
</div>
<pre class="code-block">import { tabConnect } from '../src/Widget/Tab.js';

// ç¬¬äº”ä¸ªå‚æ•° true = hover è§¦å‘ï¼ˆé¼ æ ‡æ»‘è¿‡å³åˆ‡æ¢ï¼‰
tabConnect(tabNav, document.body, 'active', 'tab', true);</pre>

<h2>3. åŠ¨æ€æ·»åŠ æ ‡ç­¾</h2>
<div class="demo-block">
  <div style="display:flex;gap:0.5em;margin-bottom:0.8em">
    <button id="btn-add-tab">æ·»åŠ æ ‡ç­¾é¡µ</button>
    <button id="btn-remove-tab">ç§»é™¤æœ€åä¸€ä¸ª</button>
  </div>
  <div class="tab-nav" id="tabs-dynamic"></div>
  <div id="panes-dynamic" style="padding:1em;background:#f8fafc;border:1px solid #e2e8f0;border-top:none;min-height:3em">
    ï¼ˆç‚¹å‡»ã€Œæ·»åŠ æ ‡ç­¾é¡µã€ï¼‰
  </div>
</div>
<pre class="code-block">// åŠ¨æ€æ·»åŠ åé‡æ–°è°ƒç”¨ tabConnect å³å¯
tabConnect(tabNav, panesContainer, 'active', 'tab');</pre>

<h2>å‚æ•°è¯´æ˜</h2>
<table class="param-table">
  <tr><th>å‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr>
  <tr><td>tabButtonContainer</td><td>HTMLElement</td><td>Tab æŒ‰é’®çš„çˆ¶å®¹å™¨</td></tr>
  <tr><td>paneContainer</td><td>HTMLElement</td><td>å†…å®¹é¢æ¿çš„çˆ¶å®¹å™¨ï¼ˆæˆ– document.bodyï¼‰</td></tr>
  <tr><td>activeClass</td><td>string</td><td>æ¿€æ´»çŠ¶æ€çš„ CSS classï¼Œé»˜è®¤ 'active'</td></tr>
  <tr><td>dataAttr</td><td>string</td><td>æŒ‰é’®ä¸Š data-* å±æ€§åï¼Œå€¼å¯¹åº”é¢æ¿ idï¼Œé»˜è®¤ 'target'</td></tr>
  <tr><td>triggerOnHover</td><td>boolean</td><td>true = é¼ æ ‡æ‚¬åœåˆ‡æ¢ï¼Œé»˜è®¤ falseï¼ˆç‚¹å‡»åˆ‡æ¢ï¼‰</td></tr>
</table>
</div>

<script type="module">
import { tabConnect } from '../src/Widget/Tab.js';

// 1. åŸºç¡€
tabConnect(document.getElementById('tabs-basic'), document.body, 'active', 'target');

// 2. Hover
tabConnect(document.getElementById('tabs-hover'), document.body, 'active', 'tab', true);

// 3. åŠ¨æ€ Tab
let tabCount = 0;
const dynNav = document.getElementById('tabs-dynamic');
const dynPanes = document.getElementById('panes-dynamic');

function rebindTabs() {
  tabConnect(dynNav, dynPanes, 'active', 'tab');
}

document.getElementById('btn-add-tab').onclick = () => {
  tabCount++;
  const id = `dyn-pane-${tabCount}`;
  const btn = document.createElement('button');
  btn.className = tabCount === 1 ? 'active' : '';
  btn.dataset.tab = id;
  btn.textContent = `Tab ${tabCount}`;
  btn.style.cssText = 'padding:.4em 1em;border:none;background:transparent;cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-2px;font-size:.9em;color:#64748b';
  dynNav.appendChild(btn);

  const pane = document.createElement('div');
  pane.id = id;
  pane.className = `tab-pane${tabCount === 1 ? ' active' : ''}`;
  pane.textContent = `è¿™æ˜¯ Tab ${tabCount} çš„å†…å®¹ï¼ˆåŠ¨æ€æ·»åŠ ï¼‰`;
  dynPanes.appendChild(pane);

  rebindTabs();
  btn.click();
};

document.getElementById('btn-remove-tab').onclick = () => {
  const buttons = dynNav.querySelectorAll('button');
  if (!buttons.length) return;
  const lastBtn = buttons[buttons.length - 1];
  const paneId = lastBtn.dataset.tab;
  const pane = document.getElementById(paneId);
  const wasActive = lastBtn.classList.contains('active');
  lastBtn.remove();
  if (pane) pane.remove();
  if (wasActive) {
    const remaining = dynNav.querySelector('button');
    if (remaining) remaining.click();
  }
};
</script>
</body>
</html>
