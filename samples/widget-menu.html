<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Widget Menu å³é”®èœå• â€” WebCom Samples</title>
<script src="_base.js"></script>
</head>
<body>
<div class="page-wrap">
<h1>Menu â€” å³é”®èœå•</h1>
<p class="subtitle">ä¸ºä»»æ„å…ƒç´ ç»‘å®šè‡ªå®šä¹‰å³é”®èœå•ï¼Œæ”¯æŒå­èœå•ã€åˆ†éš”ç¬¦ã€å›¾æ ‡å’Œç¦ç”¨çŠ¶æ€ã€‚</p>

<h2>1. bindTargetContextMenu â€” ç»‘å®šå³é”®èœå•</h2>
<div class="demo-block">
  <div id="ctx-target" style="padding:2em;background:#f1f5f9;border-radius:8px;text-align:center;border:2px dashed #cbd5e1;cursor:context-menu">
    åœ¨æ­¤å¤„ <b>å³é”®å•å‡»</b> æ‰“å¼€è‡ªå®šä¹‰èœå•
  </div>
</div>
<pre class="code-block">import { bindTargetContextMenu } from '../src/Widget/Menu.js';

bindTargetContextMenu(element, [
  { title: 'ç¼–è¾‘', callback: () => console.log('edit') },
  { title: 'å¤åˆ¶', callback: () => console.log('copy') },
  null,  // åˆ†éš”ç¬¦
  { title: 'åˆ é™¤', callback: () => console.log('delete'), disabled: true },
]);</pre>

<h2>2. å­èœå• â€” children åµŒå¥—</h2>
<div class="demo-block">
  <div id="ctx-submenu" style="padding:2em;background:#faf5ff;border-radius:8px;text-align:center;border:2px dashed #d8b4fe;cursor:context-menu">
    å³é”®æŸ¥çœ‹ <b>å¸¦å­èœå•</b> çš„ä¸Šä¸‹æ–‡èœå•
  </div>
</div>
<pre class="code-block">bindTargetContextMenu(element, [
  { title: 'æ–°å»º', children: [
    { title: 'æ–°å»ºæ–‡ä»¶', callback: () => {} },
    { title: 'æ–°å»ºæ–‡ä»¶å¤¹', callback: () => {} },
  ]},
  null,
  { title: 'å±æ€§', callback: () => {} },
]);</pre>

<h2>3. showContextMenu â€” æ‰‹åŠ¨å¼¹å‡º</h2>
<div class="demo-block">
  <button id="btn-show-menu">æ‰‹åŠ¨å¼¹å‡ºèœå•ï¼ˆå®šä½åˆ°æŒ‰é’®ï¼‰</button>
</div>
<pre class="code-block">import { showContextMenu } from '../src/Widget/Menu.js';

showContextMenu(menuItems, { x: event.clientX, y: event.clientY });</pre>

<h2>å‚æ•°è¯´æ˜</h2>
<table class="param-table">
  <tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr>
  <tr><td>title</td><td>string</td><td>èœå•é¡¹æ–‡æœ¬</td></tr>
  <tr><td>callback</td><td>Function</td><td>ç‚¹å‡»å›è°ƒ</td></tr>
  <tr><td>disabled</td><td>boolean</td><td>æ˜¯å¦ç¦ç”¨</td></tr>
  <tr><td>children</td><td>MenuItem[]</td><td>å­èœå•é¡¹æ•°ç»„</td></tr>
  <tr><td>null / undefined</td><td>â€”</td><td>æ¸²æŸ“ä¸ºåˆ†éš”ç¬¦</td></tr>
</table>
</div>

<script type="module">
import { bindTargetContextMenu, showContextMenu } from '../src/Widget/Menu.js';

const logAction = (label) => alert(`æ“ä½œï¼š${label}`);

// 1. åŸºæœ¬å³é”®èœå•
bindTargetContextMenu(document.getElementById('ctx-target'), [
  { title: 'âœï¸ ç¼–è¾‘', callback: () => logAction('ç¼–è¾‘') },
  { title: 'ğŸ“‹ å¤åˆ¶', callback: () => logAction('å¤åˆ¶') },
  { title: 'ğŸ”— å¤åˆ¶é“¾æ¥', callback: () => logAction('å¤åˆ¶é“¾æ¥') },
  null,
  { title: 'â­ æ”¶è—', callback: () => logAction('æ”¶è—') },
  null,
  { title: 'ğŸ—‘ï¸ åˆ é™¤', callback: () => logAction('åˆ é™¤'), disabled: true },
]);

// 2. å­èœå•
bindTargetContextMenu(document.getElementById('ctx-submenu'), [
  { title: 'ğŸ“ æ–°å»º', children: [
    { title: 'ğŸ“„ æ–°å»ºæ–‡ä»¶', callback: () => logAction('æ–°å»ºæ–‡ä»¶') },
    { title: 'ğŸ“‚ æ–°å»ºæ–‡ä»¶å¤¹', callback: () => logAction('æ–°å»ºæ–‡ä»¶å¤¹') },
    null,
    { title: 'ğŸ”– æ–°å»ºæ¨¡æ¿', callback: () => logAction('æ–°å»ºæ¨¡æ¿') },
  ]},
  { title: 'ğŸ” æœç´¢', children: [
    { title: 'åœ¨å½“å‰ç›®å½•æœç´¢', callback: () => logAction('å½“å‰ç›®å½•æœç´¢') },
    { title: 'å…¨å±€æœç´¢', callback: () => logAction('å…¨å±€æœç´¢') },
  ]},
  null,
  { title: 'âš™ï¸ å±æ€§', callback: () => logAction('å±æ€§') },
]);

// 3. æ‰‹åŠ¨å¼¹å‡º
document.getElementById('btn-show-menu').onclick = function(e) {
  showContextMenu([
    { title: 'é€‰é¡¹ A', callback: () => logAction('é€‰é¡¹A') },
    { title: 'é€‰é¡¹ B', callback: () => logAction('é€‰é¡¹B') },
    null,
    { title: 'é€‰é¡¹ Cï¼ˆç¦ç”¨ï¼‰', disabled: true },
  ], { x: e.clientX, y: e.clientY });
};
</script>
</body>
</html>
