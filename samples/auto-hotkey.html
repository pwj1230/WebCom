<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto HotKey 热键绑定 — WebCom Samples</title>
<script src="_base.js"></script>
<style>
kbd {
  display: inline-block;
  padding: 2px 7px;
  font-family: monospace;
  font-size: .85em;
  background: #f1f5f9;
  border: 1px solid #cbd5e1;
  border-radius: 4px;
  box-shadow: 0 1px 0 #94a3b8;
}
</style>
</head>
<body>
<div class="page-wrap">
<h1>ACHotKey — 声明式热键绑定</h1>
<p class="subtitle">通过 data-component="hotkey" 声明式为按钮等元素绑定键盘快捷键。</p>

<h2>1. 基础热键绑定</h2>
<div class="demo-block">
  <div style="display:flex;flex-wrap:wrap;gap:0.6em">
    <button id="btn-save" data-component="hotkey" data-hotkey-keys="ctrl+s">
      保存 <kbd>Ctrl+S</kbd>
    </button>
    <button id="btn-new" data-component="hotkey" data-hotkey-keys="ctrl+n">
      新建 <kbd>Ctrl+N</kbd>
    </button>
    <button id="btn-del" data-component="hotkey" data-hotkey-keys="delete">
      删除 <kbd>Delete</kbd>
    </button>
  </div>
  <div id="hotkey-log" class="result-box" style="margin-top:0.8em">（按下热键或点击按钮）</div>
</div>
<pre class="code-block">&lt;button data-component="hotkey"
  data-hotkey-keys="ctrl+s"&gt;
  保存
&lt;/button&gt;

&lt;!-- 按下 Ctrl+S 等同于点击此按钮 --&gt;</pre>

<h2>2. 功能键组合</h2>
<div class="demo-block">
  <div style="display:flex;flex-wrap:wrap;gap:0.6em">
    <button data-component="hotkey" data-hotkey-keys="alt+1" id="btn-tab1">
      标签页1 <kbd>Alt+1</kbd>
    </button>
    <button data-component="hotkey" data-hotkey-keys="alt+2" id="btn-tab2">
      标签页2 <kbd>Alt+2</kbd>
    </button>
    <button data-component="hotkey" data-hotkey-keys="alt+3" id="btn-tab3">
      标签页3 <kbd>Alt+3</kbd>
    </button>
  </div>
  <div id="hotkey-log2" class="result-box" style="margin-top:0.8em">（按 Alt+1/2/3 切换）</div>
</div>
<pre class="code-block">&lt;button data-component="hotkey" data-hotkey-keys="alt+1"&gt;标签页1&lt;/button&gt;
&lt;button data-component="hotkey" data-hotkey-keys="alt+2"&gt;标签页2&lt;/button&gt;
&lt;button data-component="hotkey" data-hotkey-keys="alt+3"&gt;标签页3&lt;/button&gt;</pre>

<h2>3. 全局热键提示面板</h2>
<div class="demo-block">
  <p>按 <kbd>F1</kbd> 或下方按钮显示热键帮助面板</p>
  <button id="btn-help" data-component="hotkey" data-hotkey-keys="f1">
    热键帮助 <kbd>F1</kbd>
  </button>
</div>
<pre class="code-block">&lt;button data-component="hotkey"
  data-hotkey-keys="f1"&gt;
  帮助 &lt;kbd&gt;F1&lt;/kbd&gt;
&lt;/button&gt;</pre>

<h2>data-* 属性说明</h2>
<table class="param-table">
  <tr><th>属性</th><th>格式</th><th>说明</th></tr>
  <tr><td>data-hotkey-keys</td><td>修饰键+按键，如 ctrl+s / alt+1 / f1</td><td>绑定的键盘快捷键，按下时触发元素点击</td></tr>
</table>
<div class="note">
  <b>支持的修饰键：</b>ctrl、alt、shift、meta（Mac Command 键）<br>
  <b>注意：</b>部分浏览器原生热键（如 Ctrl+T、Ctrl+W）无法覆盖。
  使用 ACHotKey 时，热键在当前页面范围内全局生效。
</div>
</div>

<script type="module">
import { ACComponent } from '../src/Auto/ACComponent.js';
import '../src/Auto/ACHotKey.js';

ACComponent.init(document.body);

const log = document.getElementById('hotkey-log');
const log2 = document.getElementById('hotkey-log2');

document.getElementById('btn-save').addEventListener('click', () => {
  log.textContent = `[${new Date().toLocaleTimeString()}] 保存 (Ctrl+S) 触发`;
});
document.getElementById('btn-new').addEventListener('click', () => {
  log.textContent = `[${new Date().toLocaleTimeString()}] 新建 (Ctrl+N) 触发`;
});
document.getElementById('btn-del').addEventListener('click', () => {
  log.textContent = `[${new Date().toLocaleTimeString()}] 删除 (Delete) 触发`;
});

['btn-tab1','btn-tab2','btn-tab3'].forEach((id, i) => {
  document.getElementById(id).addEventListener('click', () => {
    log2.textContent = `[${new Date().toLocaleTimeString()}] 切换到标签页 ${i+1} (Alt+${i+1})`;
  });
});

document.getElementById('btn-help').addEventListener('click', () => {
  const hotkeys = [
    { key: 'Ctrl+S', desc: '保存当前内容' },
    { key: 'Ctrl+N', desc: '新建' },
    { key: 'Delete', desc: '删除选中项' },
    { key: 'Alt+1~3', desc: '切换标签页' },
    { key: 'F1', desc: '显示帮助面板' },
  ];
  alert('快捷键列表：\n\n' + hotkeys.map(h => `${h.key.padEnd(12)} ${h.desc}`).join('\n'));
});
</script>
</body>
</html>
